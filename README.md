# AstrBot 图片响应插件

## 简介
这是一个使用Trea CN AI变成软件基于 AstrBot 的图片响应插件，当用户发送包含特定关键词的消息时，会自动回复相关图片。
参考了以下AstrBot插件：

今日运势：https://github.com/NINIYOYYO/astrbot_plugin_jrys

涩图插件2.0：https://github.com/FateTrial/astrbot_plugin_lolicon_image-master

不支持使用本地图片，小白AI写的，么的精力调试本地链接的功能了

## 注意事项
若安装插件后，插件后台找不到，重起下AstrBot即可

## 图片更换说明
找到路径：“./astrbot_plugin_image_response/tu/”在里面添加新的图片网页路径即可
可以自己新建“.txt”文件，在里面填写新的图片路径，不用一定在原有的基础上添加
不支持获取本地路径图片

## 功能特性

### 1. 关键词触发机制
- 支持自定义关键词列表，当消息中包含这些关键词时自动触发
- 默认包含常见的触发词，可在后台管理界面自定义

### 2. 多源图片获取
- 支持从 TXT 文件中随机选择图片链接
- 支持从本地目录随机调用图片
- 支持通过外部 API 获取图片（默认使用 lolicon API）

### 3. 灵活配置选项
- 自定义回复文本内容
- 支持@触发用户
- 支持添加水印文字
- 支持显示用户头像（好像煤没起作用）
- 图片缓存机制，避免重复发送

### 4. 后台管理界面
- 直观的配置界面
- 支持实时修改关键词
- 可配置各种功能开关

## 安装方法

1. 下载插件 zip 包
2. 在 AstrBot 后台的「插件管理」页面上传安装
3. 安装完成后，在插件配置界面进行相关设置

## 使用方法

### 基本使用
1. 在群聊或私聊中发送包含预设关键词的消息
2. 机器人会自动回复相关图片

### 命令功能
- `/image_help` - 查看插件帮助信息
- `/image_reload` - 重新加载插件配置（需要管理员权限）

## 配置说明

### 配置文件结构
插件所有配置均可在后台管理界面完成，主要配置项包括：

- **关键词列表**：设置触发图片发送的关键词
- **自定义回复文本**：发送图片时附带的文字
- **@用户开关**：是否@触发用户
- **水印设置**：水印文本和字体配置
- **图片来源**：选择使用的 TXT 文件、本地目录或外部 API
- **缓存时间**：设置图片缓存的有效期
- **图片地址**：可以单独指定只通过某个或多个“.txt”文本中的路径提供图片

### TXT 文件格式
在 `tu` 目录下创建的 TXT 文件中，每行一个图片链接，支持各种图片格式。

## 依赖要求

- httpx>=0.24.0
- Pillow>=9.5.0
- python-dotenv>=1.0.0

## 注意事项

1. 请确保网络环境能够正常访问配置的图片链接和 API
2. 使用外部 API 时，请注意遵守相关服务的使用条款
3. 建议定期更新关键词列表，以适应不同场景需求
4. 如需自定义水印字体，请将字体文件放置在 `font` 目录下

## 常见问题

### Q: 图片无法正常显示怎么办？
A: 检查图片链接是否有效，网络是否通畅，或尝试更换图片来源。

### Q: 如何添加新的图片链接？
A: 在 `tu` 目录下创建新的 TXT 文件，每行添加一个图片链接，然后在配置中选择使用该文件。

### Q: 如何修改默认的回复文本？
A: 在后台管理界面修改「自定义回复文本」配置项。

## 版本更新

### v1.0.0
- 初始版本发布
- 支持关键词触发图片发送
- 支持多源图片获取
- 提供完整的后台管理功能

## 许可证

MIT License
